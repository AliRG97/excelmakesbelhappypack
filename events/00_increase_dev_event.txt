namespace = increase_dev_event


country_event = {
	# startup event
	id = increase_dev_event.1
	#hidden = yes
	is_triggered_only = yes
	immediate = {
		clr_country_flag = JustDevedFLAG
		# Look in common\scripted_effects\00_scripted_effects_for_AI.txt
		#updateMyFlagEffect = yes
	}
	option = {

	}
}

country_event = {
	# update cost of 
	id = increase_dev_event.10
	hidden = yes
	is_triggered_only = yes
	option = {
		set_variable = {
			which = monarchCap
			value = 993
		}
		if = {
			limit = { 
				NOT = {
					has_institution = feudalism
				} 
			}
			change_variable = {
				which = monarchCap
				value = 50
			}
		} 
		if = {
			limit = { 
				NOT = {
					has_institution = feudalism
				}
			} 
			every_province = {
				limit = {
					is_institution_origin = renaissance
				}
				change_variable = {
					which = PREV:monarchCap
					which = THIS:YearsCounter
				}
			}
		}
		log = "Cap [This.monarchCap.GetValue]"
	}
}

province_event = {
	# increse counter of howmany time it was deved.
	id = increase_dev_event.2
	hidden = yes
	is_triggered_only = yes

	immediate  = {
		hidden_effect = {
			if = {
				limit  = { 
						NOT = { 
							check_variable = { 
								which  = increaseCevCount 
								value = 0
							}
						}
					}
					set_variable = {
						which = increaseCevCount
						value = 0
					}
				}
				change_variable = { which = increaseCevCount   value = 1 } #increase count by 1
		}
		if = {
			limit = { NOT = {
				has_province_modifier = increaseDev
			} }
			add_province_modifier = {
				name = increaseDev duration = -1
			}
		}
	}
	option = {
		
	}
}


country_event = {
	# update lowest dev cost provence
	id = increase_dev_event.3
	title = increase_dev_event.2.t
	desc = increase_dev_event.2.d
	#hidden = yes
	is_triggered_only = yes
	trigger = {
		NOT = { ai = yes}
	}
	immediate = {
		#updateMyFlagEffect = yes
	}

	option = {
		name = increase_dev_event.2.a
		custom_tooltip = increase_dev_event.2.a.tt
		every_owned_province = {
			limit = {
				has_province_flag = CheapDevTargetFlag
			}
			hidden_effect = { 
				clr_province_flag = CheapDevTargetFlag
				owner = {
				set_province_flag = JustDevedFLAG
				country_event = { id = increase_dev_event.1 #update
				days = 31 
				} }
			} 
			add_base_production = 1
			
			owner =  {
				hidden_effect = { 
					set_variable = { which=LocalDeVCost  which=PREV  }
					multiply_variable = { which = LocalDeVCost	value = -1 }					
					add_power_effect = { command=add_dip_power
						variable=LocalDeVCost				
					}
				}
				custom_tooltip = "Lose ?R[This.LocalDeVCost.GetValue]?! dip"
			}
			
		}
	}
}

province_event = {
	id = increase_dev_event.4
	# fired by every institution event
	hidden = yes
	is_triggered_only = yes
	trigger = {
		NOT = { has_province_flag = institution_origin_flag }		
	}
	option = {

	}

}