namespace = increase_dev_event


country_event = {
	# startup event
	id = increase_dev_event.1
	hidden = yes
	trigger = {
		NOT = {  is_SPEC_TAG = yes
 # do not trigger for special tags
		}
	}

	immediate = {
		clr_country_flag = JustDevedFLAG
		# Look in common\scripted_effects\00_scripted_effects_for_AI.txt
		HiddenUpdateDevFlagEffect = yes	
		HiddenUpdateDipDevFlagEffect = yes
	}

	option = {	
		if = {
			limit = { ai = no }
		}
	}
}

province_event = {
	# on_action dev click
	id = increase_dev_event.2
	hidden = yes
	trigger = {
		OR = {
		 has_province_flag = CheapDevTargetFlag 
		 has_province_flag = CheapDipTargetFlag
		}
	}


	option = {	
		owner = { clr_country_flag = JustDevedFLAG }
			HiddenUpdateDevFlagEffect = yes
			HiddenUpdateDipDevFlagEffect = yes
	}
}

country_event = {
	# update cost of 
	id = increase_dev_event.10
	hidden = yes
	is_triggered_only = yes
	option = {
		set_variable = {
			which = monarchCap
			value = 993
		}
		if = {
			limit = { 
				NOT = {
					has_institution = feudalism
				} 
			}
			change_variable = {
				which = monarchCap
				value = 50
			}
		} 
		if = {
			limit = { 
				NOT = {
					has_institution = feudalism
				}
			} 
			every_province = {
				limit = {
					is_institution_origin = renaissance
				}
				change_variable = {
					which = PREV:monarchCap
					which = THIS:YearsCounter
				}
			}
		}
	}
}



country_event = {
	# update lowest dev cost provence
	id = increase_dev_event.3
	hidden = yes
	is_triggered_only = yes
	trigger = {
		always = yes
		#NOT = { ai = yes }
	}
	immediate = {
		HiddenUpdateDevFlagEffect = yes
		HiddenUpdateDipDevFlagEffect = yes
	}
	option = {
		every_owned_province = {
			limit = {
				has_province_flag = CheapDevTargetFlag
			}
			hidden_effect = { 
				owner = { 
				set_country_flag = JustDevedFLAG
				fire_event_next_month = {
					id = increase_dev_event.1
				} }
			} 
			add_base_tax  = 1
			export_dev_cost_of_province = {
				name = LocalDeVCost
			}
			owner =  {
				hidden_effect = { 	
					set_variable = { which = LocalDeVCost which = PREV }
					multiply_variable = { which = LocalDeVCost value = -1 }
					set_variable = { which = PrevLocalDeVCost which = LocalDeVCost }
					log = "[This.LocalDeVCost.GetValue] lost that much adm. to def [Prev.GetName] as this [This.GetName]"
					add_power_effect = { command=add_adm_power
						variable=LocalDeVCost				
					}
} 	} 	} 	}	}				
		
country_event = {
	# update lowest dev cost provence
	id = increase_dev_event.4
	hidden = yes
	is_triggered_only = yes
	trigger = {
		#NOT = { ai = yes }
	}
	immediate = {
		HiddenUpdateDevFlagEffect = yes
		HiddenUpdateDipDevFlagEffect = yes
	}
	option = {
		every_owned_province = {
			limit = {
				has_province_flag = CheapDipTargetFlag
			}
			hidden_effect = { 
				owner = { 
				set_country_flag = JustDevedFLAG
				fire_event_next_month = {
					id = increase_dev_event.1
				} }
			} 
			add_base_production = 1
			export_dev_cost_of_province = {
				name = LocalDeVCost
			}
			owner =  {
				hidden_effect = { 	
					set_variable = { which = LocalDeVCost which = PREV }
					multiply_variable = { which = LocalDeVCost value = -1 }
					set_variable = { which = PrevLocalDeVCost which = LocalDeVCost }
					log = "[This.LocalDeVCost.GetValue] lost that much dev. to def [Prev.GetName] as this [This.GetName]"
					add_power_effect = { command=add_dip_power
						variable=LocalDeVCost				
					}
} 	} 	} 	}	}		

country_event = {
	# update lowest dev cost provence
	id = increase_dev_event.5
	hidden = yes
	is_triggered_only = yes
	trigger = {
		#NOT = { ai = yes }
	}
	immediate = {
		HiddenUpdateDevFlagEffect = yes
		HiddenUpdateDipDevFlagEffect = yes
	}
	option = {
		every_owned_province = {
			limit = {
				has_province_flag = CheapDevTargetFlag
			}
			hidden_effect = { 
				owner = { 
				set_country_flag = JustDevedFLAG
				fire_event_next_month = {
					id = increase_dev_event.1
				} }
			} 
			add_base_manpower = 1
			export_dev_cost_of_province = {
				name = LocalDeVCost
			}
			owner =  {
				hidden_effect = { 	
					set_variable = { which = LocalDeVCost which = PREV }
					multiply_variable = { which = LocalDeVCost value = -1 }
					set_variable = { which = PrevLocalDeVCost which = LocalDeVCost }
					log = "[This.LocalDeVCost.GetValue] lost that much mil. to def [Prev.GetName] as this [This.GetName]"
					add_power_effect = { command=add_mil_power
						variable=LocalDeVCost				
					}
} 	} 	} 	}	}		

country_event = {
	# update lowest dev cost provence
	id = increase_dev_event.6
	is_triggered_only = yes
	title = increase_dev_event.6.t
	desc = increase_dev_event.6.d 
	immediate = {
		FROM = {
			ML_give_free_idea_effect = yes
		}
	}

	option = {
		name = increase_dev_event.6.a.t
		custom_tooltip = increase_dev_event.6.a.d 

	}

}