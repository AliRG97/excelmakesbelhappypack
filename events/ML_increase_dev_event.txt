namespace = increase_dev_event


country_event = {
	# startup event
	id = increase_dev_event.1
	hidden = yes
	trigger = {
		NOT = {  is_SPEC_TAG = yes
 # do not trigger for special tags
		}
	}

	immediate = {
		clr_country_flag = JustDevedFLAG
		# Look in common\scripted_effects\00_scripted_effects_for_AI.txt
	}

	option = {	
		if = {
			limit = { ai = no }
		}
	}
}

province_event = {
	# on_action dev click
	id = increase_dev_event.2
	hidden = yes
	trigger = {
		OR = {
		 has_province_flag = CheapDevTargetFlag 
		 has_province_flag = CheapDipTargetFlag
		}
	}


	option = {	
		owner = { clr_country_flag = JustDevedFLAG }
	}
}

country_event = {
	# update cost of 
	id = increase_dev_event.10
	hidden = yes
	is_triggered_only = yes
	option = {
		set_variable = {
			which = monarchCap
			value = 993
		}
		if = {
			limit = { 
				NOT = {
					has_institution = feudalism
				} 
			}
			change_variable = {
				which = monarchCap
				value = 50
			}
		} 
		if = {
			limit = { 
				NOT = {
					has_institution = feudalism
				}
			} 
			every_province = {
				limit = {
					is_institution_origin = renaissance
				}
				change_variable = {
					which = PREV:monarchCap
					which = THIS:YearsCounter
				}
			}
		}
	}
}



country_event = {
	# add base tax
	id = increase_dev_event.3
	title = increase_dev_event.1.t
	desc = increase_dev_event.1.d
	hidden = no
	is_triggered_only = yes
	trigger = {
		always = yes
		#NOT = { ai = yes }
	}
	immediate = {
		hidden_effect = { 
		HiddenUpdateDevFlagEffect = yes
		}
	}
	option = {
		name=  increase_dev_event.1.a
		random_owned_province = {
			limit = {
				has_province_flag = CheapDevTargetFlag
			}
			hidden_effect = { 
				owner = { 
				set_country_flag = JustDevedFLAG
				fire_event_next_month = {
					id = increase_dev_event.1
				} }
			} 
			add_base_tax  = 1
			hidden_effect = { 
			export_dev_cost_of_province = {
				name = LocalDeVCost
			}
				owner =  {	
					every_owned_province = {
						limit = { has_province_flag = CheapDevTargetFlag }
						clr_province_flag = CheapDevTargetFlag
					}
					PREV = { set_province_flag = CheapDevTargetFlag }				
					set_variable = { which = LocalDeVCost which = PREV }
					multiply_variable = { which = LocalDeVCost value = -1 }
					set_variable = { which = PrevLocalDeVCost which = LocalDeVCost }
					log = "[This.LocalDeVCost.GetValue] lost that much adm. to def [Prev.GetName] as this [This.GetName]"
					add_power_effect = { command=add_adm_power
						variable=LocalDeVCost				
					}
			} 	} 
			owner =  { custom_tooltip =  tax_click_tooltip }
	} 	}	
}				
		
country_event = {
	# add base production
	id = increase_dev_event.4
	title = increase_dev_event.1.t
	desc = increase_dev_event.1.d
	hidden = no
	is_triggered_only = yes
	trigger = {
		#NOT = { ai = yes }
	}
	immediate = {
		hidden_effect = { 
			HiddenUpdateDipDevFlagEffect = yes
		}
	}
	option = {
		name=  increase_dev_event.1.a
		random_owned_province = {
			limit = {
				has_province_flag = CheapDipTargetFlag
			}
			hidden_effect = { 
				owner = { 
				set_country_flag = JustDevedFLAG
				fire_event_next_month = {
					id = increase_dev_event.1
				} }
			} 
			add_base_production = 1
			hidden_effect = { 
			export_dev_cost_of_province = {
				name = LocalDeVCost
			}
				owner =  {	
					every_owned_province = {
						limit = { has_province_flag = CheapDevTargetFlag }
						clr_province_flag = CheapDevTargetFlag
					}
					PREV = { set_province_flag = CheapDevTargetFlag }
					set_variable = { which = LocalDeVCost which = PREV }
					multiply_variable = { which = LocalDeVCost value = -1 }
					set_variable = { which = PrevLocalDeVCost which = LocalDeVCost }
					log = "[This.LocalDeVCost.GetValue] lost that much dev. to def [Prev.GetName] as this [This.GetName]"
					add_power_effect = { command=add_dip_power
						variable=LocalDeVCost				
					}
				} 	} 
				owner =  { custom_tooltip =  dip_click_tooltip }
	} 	}	
}	

country_event = {
	# update lowest dev cost provence
	id = increase_dev_event.5
	title = increase_dev_event.1.t
	desc = increase_dev_event.1.d
	hidden = no
	is_triggered_only = yes
	trigger = {
		#NOT = { ai = yes }
	}
	immediate = {
		hidden_effect = {
			every_owned_province = {
					limit = { always = yes }
				clr_province_flag = CheapDevTargetFlag
				set_variable = { which = LocalDeVCost value = 0 }
				export_dev_cost_of_province = {
					name = LocalDeVCost
				}
			}
			every_owned_province = {
				limit = { always = yes }
				owner = { set_variable = {
					which = LocalDeVCost
					which = PREV
				}	}
				if = { limit = { owner = {
					any_owned_province = {
						NOT = {
						check_variable = {
							which = LocalDeVCost
							which = PREV
						} 	}
					} 	} }
					if = { limit = { owner = { NOT = { ai = yes } } }
					log = LogText.6 }
				}
				else = {
					set_province_flag = CheapDevTargetFlag
					#if = { limit = { owner = { NOT = { ai = yes } } }
					#log = LogText.5 }
				}			
			}
			owner = { random_owned_province = { 
				limit = { has_province_flag = CheapDevTargetFlag }
				owner = {
					set_variable = { which = LocalDeVCost which = PREV }
				}
			} }
		}
	}
	option = {
		name=  increase_dev_event.1.a
		random_owned_province = {
			limit = {
				has_province_flag = CheapDevTargetFlag
			}
			hidden_effect = { 
				owner = { 
				set_country_flag = JustDevedFLAG
				fire_event_next_month = {
					id = increase_dev_event.1
				} }
			} 
			add_base_manpower = 1
			hidden_effect = { 
			export_dev_cost_of_province = {
				name = LocalDeVCost
			}
			owner =  {
				every_owned_province = {
					limit = { has_province_flag = CheapDevTargetFlag }
					clr_province_flag = CheapDevTargetFlag
				}
				PREV = { set_province_flag = CheapDevTargetFlag }
					set_variable = { which = LocalDeVCost which = PREV }
					multiply_variable = { which = LocalDeVCost value = -1 }
					set_variable = { which = PrevLocalDeVCost which = LocalDeVCost }
					Math_effect_floor = { 
						which = PrevLocalDeVCost 
					}
					log = "[This.LocalDeVCost.GetValue] lost that much mil. to def [Prev.GetName] as this [This.GetName]"
					add_power_effect = { command=add_mil_power
						variable=LocalDeVCost				
					}
				} 	} 
				owner =  { custom_tooltip =  mil_click_tooltip }
	} 	}	
}	

country_event = {
	# update lowest dev cost provence
	id = increase_dev_event.6
	is_triggered_only = yes
	title = increase_dev_event.6.t
	desc = increase_dev_event.6.d 
	immediate = {
		FROM = {
			ML_give_free_idea_effect = yes
		}
	}

	option = {
		name = increase_dev_event.6.a.t
		custom_tooltip = increase_dev_event.6.a.d 

	}

}